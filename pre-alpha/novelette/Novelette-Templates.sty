%%
%% This is file Novelette-Templates.sty,
%% part of Novelette document class.
%% Copyright 2022 Robert Allgeyer.
%% 
%% It may be used, distributed, and/or modified under the
%% conditions of the MIT License. See:
%% https://opensource.org/licenses/MIT
%% 
%%
\ProvidesFile{Novelette-Templates.sty}%
[2022/06/22 v0.0.1 LuaLaTeX file (templates)]
%%

%% This file is loaded \AtEndPreamble.
%% File Novelette-Settings.sty defined \template{number}{name}
%% That setting will now be activated, using the values in this file.

%% Novelette offers a pre-defined choice of templates, at the sizes most often
%% used for print-on-demand fiction and popular nonfiction.
%% The templates have clearances (sometimes called margins) pre-set
%% to at least the minimum value required by major P.O.D. Services.
%% Templates are organized into group numbers 1, 2, 3.
%% In each group are several templates, named by trim size.
%% Within each group, the named templates have closely-related layout values.
%% Then it is possible to change name (at same number), and keep the flow
%% of paragraphs and pagination. This enables the author to issue a book at
%% US (inches) or UK (metric) trim size, within the same group.
%% The differences within a group are absorbed by clearances, by inter-line
%% space, or by scaling font size in proportion to text width.
%% However, if the group number is changed (even with same name), then
%% paragraphs and pagination will differ.

%% To allow for image placement without the need to re-scale, there is a
%% maximum image width and height. It is the same for each template.
%% Images are placed with top and bottom padding,
%% which automatically change to absorb differences in inter-line spacing.
%% Thus, the maximum width will fit into the narrowest text width.
%% The maximum height will fit into the shortest body height (not including
%% header) less two lines, to allow for possible upshift.
%% Images placed in \opening are limited to 100 pixels height,
%% using only 600ppi black/white line art.
\gdef\my@maximagewidth{2300} % B/W at 600ppi. Half that, at 300ppi gray.
\gdef\my@maximageheight{3320} % B/W at 600ppi. Half that, at 300ppi gray.
\gdef\my@maxdecoheight{100} % B/W at 600ppi. Deco does not use grayscale.

% \textwidth is a built-in TeX macro.
\newlength\my@trimwidth
\newlength\my@trimheight
\newlength\my@topclear
\newlength\my@outclear % Calculated as \my%trimwidth-\my@inwidth-\textwidth.
\newlength\my@botclear
\newlength\my@inclear
\newlength\my@fontsize % In TeX points = 800/803 x PostScript points.

% Reference: To nearest 0.0001in,
% 13mm = 0.5118in
%  3mm = 0.1181in
% 13mm + 3mm = 0.6299in
% 13mm + 0.1250in = 0.6368in
% 0.5in + 0.1250in = 0.6250in
% To ensure both US/UK will have enough clearance,
% minimum top/outside/bottom clearance 0.5118in,
% and minimum inside clearance 0.6368in. 

% Each template number has a fixed number of body text lines per page, \my@lpp.
% Printable area (including header) is \my@trimheight-\my@topclear-\my@botclear
% but it can be reduced using upshift.
% Inter-line spacing will be calculated so that the specified number of lines,
% plus header and gap, less upshift, fits within the printable area.

% At a specific template number, each template with that number has its
% font size scaled proportionately to its \textwidth, so that line breaks
% and paragraphs are the same. Target is about 65 characters per line,
% using Swainson font.

%% Group 1:
\ifthenelse{\equal{\my@template}{1}}{ % fontsize(pt)/textwidth(in)=2.88
  \gdef\my@lpp{30}
  %%
  \ifthenelse{\equal{\my@trim}{Novella}}{
    \gsetlength\textwidth{3.85in}
    \gsetlength\my@fontsize{11.088pt}
    \gsetlength\my@trimwidth{5in}
    \gsetlength\my@trimheight{8in}
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.630in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{B}}{
    \gsetlength\textwidth{3.93in}
    \gsetlength\my@fontsize{11.3184pt}
    \gsetlength\my@trimwidth{129mm} % 5.079in
    \gsetlength\my@trimheight{198mm} % 7.795in
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.630in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Memoir}}{
    \gsetlength\textwidth{4.1in}
    \gsetlength\my@fontsize{11.808pt}
    \gsetlength\my@trimwidth{5.25in}
    \gsetlength\my@trimheight{8in}
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.630in}
  }{}
}{}
%% End group 1.

%% Group 2:
\ifthenelse{\equal{\my@template}{2}}{ % fontsize(pt)/textwidth(in)=2.84
  \gdef\my@lpp{32}
  %%
  \ifthenelse{\equal{\my@trim}{B}}{
    \gsetlength\my@fontsize{11.1612pt}
    \gsetlength\textwidth{3.93in}
    \gsetlength\my@trimwidth{129mm} % 5.079in
    \gsetlength\my@trimheight{198mm} % 7.795in
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.630in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Memoir}}{
    \gsetlength\my@fontsize{11.644pt}
    \gsetlength\textwidth{4.1in}
    \gsetlength\my@trimwidth{5.25in}
    \gsetlength\my@trimheight{8in}
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.630in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Demy}}{
    \gsetlength\my@fontsize{11.644pt}
    \gsetlength\textwidth{4.1in}
    \gsetlength\my@trimwidth{135mm} % 5.315in
    \gsetlength\my@trimheight{216mm} % 8.504in
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.662in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Digest}}{
    \gsetlength\my@fontsize{11.644pt}
    \gsetlength\textwidth{4.1in}
    \gsetlength\my@trimwidth{5.5in}
    \gsetlength\my@trimheight{8.5in}
    \gsetlength\my@topclear{.6in}
    \gsetlength\my@botclear{.6in}
    \gsetlength\my@inclear{.755in}
  }{}
}{}
%% End group 2.

%% Group 3:
\ifthenelse{\equal{\my@template}{3}}{ % fontsize(pt)/textwidth(in)=2.84
  \gdef\my@lpp{34}
  %%
  \ifthenelse{\equal{\my@trim}{Demy}}{
    \gsetlength\my@fontsize{11.644pt}
    \gsetlength\textwidth{4.1in}
    \gsetlength\my@trimwidth{135mm} % 5.315in
    \gsetlength\my@trimheight{216mm} % 8.504in
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.662in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Digest}}{
    \gsetlength\my@fontsize{12.0132pt}
    \gsetlength\textwidth{4.23in}
    \gsetlength\my@trimwidth{5.5in}
    \gsetlength\my@trimheight{8.5in}
    \gsetlength\my@topclear{.512in}
    \gsetlength\my@botclear{.512in}
    \gsetlength\my@inclear{.694in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Trade}}{
    \gsetlength\my@fontsize{12.0132pt}
    \gsetlength\textwidth{4.23in}
    \gsetlength\my@trimwidth{6in}
    \gsetlength\my@trimheight{9in}
    \gsetlength\my@topclear{.750in}
    \gsetlength\my@botclear{.750in}
    \gsetlength\my@inclear{.944in}
  }{}
  %%
  \ifthenelse{\equal{\my@trim}{Royal}}{
    \gsetlength\my@fontsize{12.0132pt}
    \gsetlength\textwidth{4.23in}
    \gsetlength\my@trimwidth{156mm} % 6.142in
    \gsetlength\my@trimheight{234mm} % 9.213in
    \gsetlength\my@topclear{.821in}
    \gsetlength\my@botclear{.821in}
    \gsetlength\my@inclear{1.053in}
  }{}
}{}
%% End group 3.

%% Cannot re-set template, after Preamble:
\let\template\relax


%%
\endinput
%%
%% End of file Novelette-Templates.sty.


