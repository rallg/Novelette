%%
%% This is file Novelette-Fonts.sty,
%% part of Novelette document class.
%% Copyright 2022 Robert Allgeyer.
%%
%% It may be used, distributed, and/or modified under the
%% conditions of the MIT License. See:
%% https://opensource.org/licenses/MIT
%% 
%%
\ProvidesFile{Novelette-Fonts.sty}%
[2022/06/22 v0.0.1 LuaLaTeX file (font settings and defaults)]
%%


%% Default font features (may be changed later):
\defaultfontfeatures{} % Reset.
\defaultfontfeatures{%
  SmallCapsFeatures={Renderer=Basic},Ligatures=TeX,Kerning=On%
}
%%


%% Font definitions:
\setmainfont{Swainson}[Numbers=OldStyle,Ligatures=Common]
\newfontface\titling{SwainsonTitling}
\newcommand\normal[1]{\addfontfeature{Numbers=Lining}#1}
\newcommand\huge[1]{{\titling\addfontfeature{Scale=1.6}#1}}
\let\Huge\huge\relax
\let\HUGE\huge\relax
\newcommand\large[1]{\addfontfeature{Scale=1.2}#1}
\let\Large\large\relax
\let\LARGE\large\relax
\newcommand\small[1]{\textbf{\addfontfeature{Scale=0.88}#1}}
\let\footnotesize\small\relax
\let\scriptsize\small\relax
\let\tiny\small\relax
\IfFontExistsTF{Libertinus Serif}{
  \newfontfamily\delegate{Libertinus Serif}[Scale=MatchLowercase]
}{
  \let\delegate\relax
  \ClassWarning{Novelette}{BIG BAD WARNING. Did not find Libertinus fonts. ^^J%
   You used command \string\delegate\. This calls characters from the ^^J%
   Libertinus Serif fonts. But Novelette could not find that font family. ^^J%
   Solution: Use your TeX package manager to install 'libertinus-fonts'. ^^J%
   Neither Novelette nor MikTeX can do that automatically. Do it yourself. ^^J%
   Then try again. Until 'libertinus-fonts' package is installed, you will ^^J%
   see the missing character symbol, instead of delegate characters.}
}
%%

%% Optional decofont:
\newif \if@decofont
\DeclareDocumentCommand\setdecofont { m O{} } {
  \@tempTFfalse%
  \IfSubStr{#2}{Color}{\@tempTFtrue}{}%
  \IfSubStr{#2}{Colour}{\@tempTFtrue}{}%
  \IfSubStr{#2}{color}{\@tempTFtrue}{}%
  \IfSubStr{#2}{colour}{\@tempTFtrue}{}%
  \IfSubStr{#2}{Opacity}{\@tempTFtrue}{}%
  \IfSubStr{#2}{opacity}{\@tempTFtrue}{}%
  \if@tempTF%\my@Efco\fi%
  \newfontfamily\decofont{#1}[#2]
  \@decofonttrue
}
\newcommand\@DecoFont{ % Called \AtBeginDocument.
  \if@decofont\else\setdecofont{Swainson}[Scale=2]\fi
  \let\setdecofont\relax
}
%%


%%
\endinput
%%
%% End of file Novelette-Fonts.sty.


