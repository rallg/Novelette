%%
%% This is file Novelette-Metadata.sty,
%% part of Novelette document class.
%% Copyright 2022 Robert Allgeyer.
%%
%% It may be used, distributed, and/or modified under the
%% conditions of the MIT License. See:
%% https://opensource.org/licenses/MIT
%% 
%%
\ProvidesFile{Novelette-Metadata.sty}%
[2022/06/22 v0.0.1 LuaLaTeX file (PDF Metadata settings)]
%% 

%% PDF Metadata is non-printing identifying information in the PDF file.
%% Some or all of it can be read by PDF reader software.
%% There are many more kinds PDF Metadata, such as subject and keywords.
%% They are  used for database search of electronic documents, not paper print.
%% Thus, Novelette does not incorporate that additional PDF Metadata.
%% When you sign up with a P.O.D. Service, you will provide subject, keywords,
%% and description directly to their database, rather than in the PDF.
%% The print ISBN is not PDF Metadata, because you are not selling PDF copies.
%% Believe it or not, the Copyright is undefined in PDF Metadata.
%% This is because the PDF is privately transferred between yourself
%% and the P.O.D. Service (and Editor, if you use one). It is not published.
%% Actual book Copyright notice is printed on its Copyright page.
%% Particularly note that your P.O.D. Service is NOT the publisher: YOU are!

% \title{Title of Book} % Part of PDF Metadata.
\gdef\title#1{\gdef\@title{#1}}
\gdef\thetitle{\@title} % For convenience.
\gdef\theTitle{\@title}
\title{} % Required. If left empty: Fake title provided, warning issued.

% \author{Author Name} % Part of PDF Metadata.
\gdef\author#1{\gdef\@author{#1}}
\gdef\theauthor{\@author} % For convenience.
\gdef\theAuthor{\@author}
\author{} % May be left empty, but that is not best.

% \subtitle{This Is Optional} % Not part of PDF Metadata.
\gdef\subtitle#1{\gdef\@subtitle{#1}}
\gdef\thesubtitle{\@subtitle} % Compatibility.
\gdef\theSubtitle{\@subtitle}
\subtitle{} % May be left empty. Not required.

% \formatPDF{conformance}{intent} 
% If not used, default \formatPDF{X-1a:2001}{SWOP} set \AtEndPreamble.
\gdef\my@conformance{}
\gdef\my@intent{}
\newcommand\formatPDF[2]{
  \ifthenelse{\equal{#1}{X-1a:2001}}{\gdef\my@conformance{#1}}{}
  \ifthenelse{\equal{#1}{X-3:2002}}{\gdef\my@conformance{#1}}{}
  \ifthenelse{\equal{#2}{SWOP}}{\gdef\my@intent{#2}}{}
  \ifthenelse{\equal{#2}{FOGRA39}}{\gdef\my@intent{#2}}{}
  \ifthenelse{\equal{#2}{JC200103}}{\gdef\my@intent{#2}}{}
  \ifthenelse{\equal{#2}{CUSTOM}}{\gdef\my@intent{#2}}{}
  \ifthenelse{\equal{\my@conformance}{} \OR \equal{\my@intent}{}}{
    \ClassError{Novelette}{Bad \string\formatPDF\string argument}%
    {\string\setPDF{conformance}{intent} arguments are case-sensitive. ^^J%
     One of these conformances:  X-1a:2001  X-3:2002 ^^J%
     One of these intents:  SWOP  FOGRA39  JC200103 CUSTOM ^^J%
     Do not use CUSTOM unless you are knowledgeable! ^^J%
     Default:  \string\formatPDF{X-1a:2001}{SWOP} }
  }{}
} % End \formatPDF.

% Disable the above Metadata commands, called \AtBeginDocument:
\gdef\@DisableMetadataCommands{
  \let\title\relax
  \let\author\relax
  \let\subtitle\relax
  \LetLtxMacro\formatPDF\relax
} % End \@DisableMetadataCommands.


%%
\endinput
%%
%% End of file Novelette-Metadata.sty.


